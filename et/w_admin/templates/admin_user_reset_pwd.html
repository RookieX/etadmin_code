{% extends base.html %}

{% block pos %}
重置密码
{% end %}

{% block main %}
<form id="reset_pwd_form" method="post">
    <div class="formbody">
        <div class="formtitle"><span>重置密码</span></div>

        <ul class="forminfo">

            <li>
                <label>用户名</label>
                <input name="user_name" type="text" class="dfinput" value="{{ model }}" disabled/>
            </li>

            <li>
                <label>密码</label>
                <input name="password" type="text" class="dfinput"/>
            </li>

            <li>
                <label>&nbsp;</label>
                <input type="submit" class="btn" value="确认保存"/>
            </li>
        </ul>
    </div>
</form>
</div>
{% end %}

{% block footer %}
<script type="text/javascript">
    $(function () {
        //表单验证
        $('#reset_pwd_form').validate({
            errorElement: 'p',
            errorClass: 'valid-error',
            rules: {
                password: {
                    required: true
                }
            },
            messages: {
                password: {
                    required: '请填写密码'
                }
            },
            submitHandler: function (form) {
                $(form).ajaxSubmit({
                    dataType: 'JSON',
                    success: function (resp) {
                        if (resp.status === 0) {
                            alert('保存成功');
                        } else {
                            alert(resp.msg);
                        }
                    },
                    error: function () {
                        alert('提交失败');
                    }
                });
            }
        });
    });
</script>
{% end %}